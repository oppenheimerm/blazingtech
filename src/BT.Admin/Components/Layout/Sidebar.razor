@implements IDisposable

@inject NavigationManager NavigationManager

@rendermode InteractiveServer


@code {
    private string? currentUrl;
    private string activeCssStyle = "bg-violet-500";

    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }

    bool IsActive(string href, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix)
    {
        var relativePath = NavigationManager.ToBaseRelativePath(NavigationManager.Uri).ToLower();
        return navLinkMatch == NavLinkMatch.All ? relativePath == href.ToLower() : relativePath.StartsWith(href.ToLower());
    }

    string GetActive(string href, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix) => IsActive(href, navLinkMatch) ? "bg-violet-500" : "";
}

<aside id="sidebar" class="fixed top-0 left-0 z-40 w-64 h-screen bg-white border-r border-gray-200 sm:translate-x-0 dark:bg-zinc-800
    dark:border-gray-700 transition-transform -translate-x-full">

    <div id="sidebar-links-wrap" class="h-full px-3 pt-6 pb-4 overflow-y-auto">
        <ul class="space-y-2 font-medium">
            <li>
                <NavLink class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" ActiveClass="@activeCssStyle" href="dashboard">
                    <div class=" flex justify-center items-center">
                        <span class="material-symbols-rounded mr-2" style="vertical-align:middle;">
                            dashboard
                        </span>
                        <span class="flex-grow-1 me-3">Dashboard</span>
                    </div>
                    <div>
                    </div>

                </NavLink>
            </li>
            <li>
                <NavLink class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" ActiveClass="@activeCssStyle" href="/products/index">
                    <div class="flex justify-between w-full justify-center items-center">
                        <div>
                            <span class="material-symbols-rounded mr-2" style="vertical-align:middle;">
                                inventory
                            </span>
                            <span class="flex-grow-1 me-3">Products</span>
                        </div>
                        <div>
                        </div>

                    </div>

                </NavLink>
            </li>
            <li>
                <NavLink class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" ActiveClass="@activeCssStyle" href="/roles/index">
                    <div class="flex justify-between w-full justify-center items-center">
                        <div>
                            <span class="material-symbols-rounded">
                                person_add
                            </span>
                            <span class="flex-grow-1 me-3">Roles</span>
                        </div>
                        <div>
                        </div>

                    </div>

                </NavLink>
            </li>

            <li>
                <a class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" href="users/index">
                    <div class=" flex justify-center items-center">
                        <span class="material-symbols-rounded mr-2" style="vertical-align:middle;">
                            group
                        </span>
                        <span class="flex-grow-1 me-3">Users</span>
                    </div>
                    <div>
                    </div>

                </a>
            </li>
            <li>

                <NavLink class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" href="inbox">
                    <div class="flex justify-between w-full justify-center items-center">
                        <div>
                            <span class="material-symbols-rounded mr-2" style="vertical-align:middle;">
                                mail
                            </span>
                            <span class="flex-grow-1 me-3">Inbox</span>
                        </div>
                        <div>

                            <span class="d-inline-flex items-center justify-center px-2 ms-3 text-sm font-medium rounded-full bg-neutral-200 dark:text-zinc-800">
                                <span class="">
                                    4
                                </span>
                            </span>
                        </div>
                    </div>
                </NavLink>

            </li>
        </ul>

        <!--
            w-3/4	width: 75%;
            h-1	height: 0.25rem; /* 4px */
        -->
        <hr class="w-3/4 h-1 mx-auto my-4 bg-zinc-800 dark:bg-neutral-200 border-0 rounded md:my-5">
        <ul class="space-y-2 font-medium">
            <li>
                <a class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-neutral-200 dark:hover:bg-zinc-900" href="#">
                    <div class="flex justify-between w-full justify-center items-center">
                        <div>
                            <span class="material-symbols-rounded mr-2" style="vertical-align:middle;">
                                logout
                            </span>
                            <span class="flex-grow-1 me-3">Logout</span>
                        </div>
                        <div>
                        </div>
                    </div>
                </a>
            </li>
        </ul>
    </div>
</aside>